<body>
	<style type="text/css">
		#yjwy_main_form table tr td input{
			width:200px;
		}
		#yjwy_main_form table tr td select{
			width:200px;
		}
	</style>
	<div class="easyui-panel" data-options="fit:true">
		<div style="padding:20px 50px 20px 50px">
	    <form id="yjwy_main_form" class="easyui-form" data-options="fit:true,novalidate:true">
	    	<table  style="margin:0 20px 0 50px; cellpadding:5;text-align:right">
	    		<tr>
	    			<th>标准编码:</th>
	    			<td><input class="easyui-textbox" type="text" name="inspstan_code" value="${mainmodel?if_exists.inspstan_code?if_exists}" data-options="required:true,validType:'length[2,50]',height:25"></input></td>
	    		</tr>
	    		<tr>
	    			<th>项目类别:</th>
	    			<td>
	    				<!-- 项目初始化的时候，查询字典里的数据，并遍历到这个位置 -->
	    				<select class="easyui-combobox" name="project_category" id="project_category_formid" data-options="editable:false,required:true,validType:'length[2,50]',height:25,width:203">
						</select>
					</td>
	    		</tr>
	    		<tr>
	    			<th>专业:</th>
	    			<td>
	    				<!-- 项目初始化的时候，查询字典里的数据，并遍历到这个位置 -->
	    				<select class="easyui-combobox" name="specialty" id="specialty_formid" data-options="editable:false,required:true,height:25,width:203">
						</select>
					</td>
	    		</tr>
	    		<tr>
	    			<th>分值:</th>
	    			<td><input class="easyui-numberbox" type="text" id="inspstan_scorevalue" name="inspstan_scorevalue" value="${mainmodel?if_exists.inspstan_scorevalue?if_exists}" data-options="required:true,precision:1,height:25"></input></td>
	    		</tr>
	    		<tr>
	    			<th>标准类别:</th>
	    			<td><input class="easyui-textbox" type="text" id="inspstan_category" name="inspstan_category" value="${mainmodel?if_exists.inspstan_category?if_exists}" data-options="required:true,validType:'length[2,50]',height:25"></input></td>
	    		</tr>
	    		<tr>
	    			<th>标准类别描述:</th>
	    			<td><input class="easyui-textbox left-count" maxlength="500" type="text" id="inspstan_category_description" name="inspstan_category_description" value="${mainmodel?if_exists.inspstan_category_description?if_exists}" data-options="multiline:true,required:true,validType:'length[2,500]',height:25" style="height:60px"></input></td>
	    		</tr>
	    		<tr>
	    			<th>质量绩效指标:</th>
	    			<td><input class="easyui-textbox left-count" maxlength="1000" type="text" id="inspstan_performance_norm" name="inspstan_performance_norm" value="${mainmodel?if_exists.inspstan_performance_norm?if_exists}" data-options="multiline:true,required:true,validType:'length[2,1000]',height:25" style="height:60px"></input></td>
	    		</tr>
	    		<tr>
	    			<th>使用范围:</th>
	    			<td><input class="easyui-textbox left-count" maxlength="50" type="text" id="inspstan_usingscope" name="inspstan_usingscope" value="${mainmodel?if_exists.inspstan_usingscope?if_exists}" data-options="multiline:true,required:true,validType:'length[2,50]',height:25" style="height:60px"></input></td>
	    		</tr>
	    		<tr>
	    			<th>核查方法:</th>
	    			<td><input class="easyui-textbox left-count" maxlength="500" type="text" id="inspstan_inpectmethod" name="inspstan_inpectmethod" value="${mainmodel?if_exists.inspstan_inpectmethod?if_exists}" data-options="multiline:true,required:true,validType:'length[2,500]',height:25" style="height:60px"></input></td>
	    		</tr>
	    		<!-- 原是否暗访 -->
	    		<tr>
	    			<th>是否强制拍照:</th>
	    			<td><input type="checkbox" style="width:20px;height:20px;" name="inspstan_secretinquiries" id="inspstan_secretinquiries_formid" value= "${mainmodel?if_exists.inspstan_secretinquiries?if_exists}"></input></td>
	    		</tr>
	    		<tr>
	    			<th>对口主管频次:</th>
	    			<td>
	    				<!-- 项目初始化的时候，查询字典里的数据，并遍历到这个位置 -->
	    				<select class="easyui-combobox" name="inspstan_dkzg_pc" id="inspstan_dkzg_pc_formid" data-options="editable:false,height:25,width:203">
						</select>
	    			</td>
	    		</tr>
	    		
	    		<tr>
	    			<th>部门经理频次:</th>
	    			<td><!-- 项目初始化的时候，查询字典里的数据，并遍历到这个位置 -->
	    				<select class="easyui-combobox" name="inspstan_bmjl_pc" id="inspstan_bmjl_pc_formid"  data-options="editable:false,height:25,width:203">
						</select>
	    			</td>
	    		</tr>
	    		<tr>
	    			<th>项目经理频次:</th>
	    			<td><!-- 项目初始化的时候，查询字典里的数据，并遍历到这个位置 -->
	    				<select class="easyui-combobox" name="inspstan_xmjl_pc" id="inspstan_xmjl_pc_formid"  data-options="editable:false,height:25,width:203">
						</select>
	    			</td>
	    		</tr>
	    		<tr>
	    			<th>区域总助频次:</th>
	    			<td><!-- 项目初始化的时候，查询字典里的数据，并遍历到这个位置 -->
	    				<select class="easyui-combobox" name="inspstan_qyzz_pc" id="inspstan_qyzz_pc_formid"  data-options="editable:false,height:25,width:203">
						</select>
	    			</td>
	    		</tr>
	    		<tr>
	    			<th>区域总频次:</th>
	    			<td><!-- 项目初始化的时候，查询字典里的数据，并遍历到这个位置 -->
	    				<select class="easyui-combobox" name="inspstan_qyz_pc" id="inspstan_qyz_pc_formid"  data-options="editable:false,height:25,width:203">
						</select>
	    			</td>
	    		</tr>
	    		<tr>
	    			<th>总监频次:</th>
	    			<td><!-- 项目初始化的时候，查询字典里的数据，并遍历到这个位置 -->
	    				<select class="easyui-combobox" name="inspstan_zj_pc" id="inspstan_zj_pc_formid"  data-options="editable:false,height:25,width:203">
						</select>
	    			</td>
	    		</tr>
	    		<tr style="display: none;">
	    			<td>主键:</td>
	    			<td><input class="easyui-textbox" type="text" name="pk_inspstan" value="${mainmodel?if_exists.pk_inspstan?if_exists}"></input></td>
	    		</tr>
	    		<tr style="display: none;">
	    			<td>外键(标准版本):</td>
	    			<td><input class="easyui-textbox" type="text" name="fk_standardedition" value="${mainmodel?if_exists.fk_standardedition?if_exists}"></input></td>
	    		</tr>
	    		<tr style="display: none;">
	    			<td>创建人:</td>
	    			<td><input class="easyui-textbox" type="text" name="create_user" value="${mainmodel?if_exists.create_user?if_exists}"></input></td>
	    		</tr>
	    		<tr style="display: none;">
	    			<td>创建时间:</td>
	    			<td><input class="easyui-textbox" type="text" name="create_time" value="${mainmodel?if_exists.create_time?if_exists}"></input></td>
	    		</tr>
	    		<tr style="display: none;">
	    			<td>修改人:</td>
	    			<td><input class="easyui-textbox" type="text" name="update_user" value="${mainmodel?if_exists.update_user?if_exists}"></input></td>
	    		</tr>
	    		<tr style="display: none;">
	    			<td>修改时间:</td>
	    			<td><input class="easyui-textbox" type="text" name="update_time" value="${mainmodel?if_exists.update_time?if_exists}"></input></td>
	    		</tr>
	    		<tr style="display: none;">
	    			<td>是否有效:</td>
	    			<td><input class="easyui-textbox" type="text" name="is_valid" value="${mainmodel?if_exists.is_valid?if_exists}"></input></td>
	    		</tr>
	    		<tr style="display: none;">
	    			<td>pk_crop:</td>
	    			<td><input class="easyui-textbox" type="text" name="pk_crop" value="${crop?if_exists}"></input></td>
	    		</tr>
	    		<tr style="display: none;">
	    			<td>标准名称</td>
	    			<td><input class="easyui-textbox" type="text" name="inspstan_name" value="${mainmodel?if_exists.inspstan_name?if_exists}"></input></td>
	    		</tr>
	    	</table>
	    </form>

	</div>
	<script type="text/javascript">
		var notRoleButtons = "${notRoleButtons?if_exists}";
		//加载项目类别
		function loadProjectCategory(){
			var url = "ezfm/baseinfo/pub/query/dictionary/dict/query";
			var param = {code:"projectCatagory",state:1};
			initDictionaryCombobox("project_category_formid",url,param); 
		}
		//加载专业
		function loadSecialty(){
			var url = "ezfm/baseinfo/pub/query/dictionary/dict/query";
			var param = {code:"propessional",state:1};
			initDictionaryCombobox("specialty_formid",url,param); 
		}
		//加载频次
		function loadPc(){
			var url = "ezfm/baseinfo/pub/query/dictionary/dict/query";
			var param = {code:"taskRate",state:1};
			initDictionaryCombobox("inspstan_dkzg_pc_formid",url,param);
			var param = {code:"taskRate",state:1};
			initDictionaryCombobox("inspstan_bmjl_pc_formid",url,param);
			var param = {code:"taskRate",state:1};
			initDictionaryCombobox("inspstan_xmjl_pc_formid",url,param);
			var param = {code:"taskRate",state:1};
			initDictionaryCombobox("inspstan_qyzz_pc_formid",url,param);
			var param = {code:"taskRate",state:1};
			initDictionaryCombobox("inspstan_qyz_pc_formid",url,param);
			var param = {code:"taskRate",state:1};
			initDictionaryCombobox("inspstan_zj_pc_formid",url,param);
			/* var data = $("#inspstan_dkzg_pc_formid").combobox("getData");
			$("#inspstan_bmjl_pc_formid").combobox({valueField: 'dict_code',textField: 'dict_name',data:data});
			$("#inspstan_xmjl_pc_formid").combobox({valueField: 'dict_code',textField: 'dict_name',data:data});
			$("#inspstan_qyzz_pc_formid").combobox({valueField: 'dict_code',textField: 'dict_name',data:data});
			$("#inspstan_qyz_pc_formid").combobox({valueField: 'dict_code',textField: 'dict_name',data:data});
			$("#inspstan_zj_pc_formid").combobox({valueField: 'dict_code',textField: 'dict_name',data:data}); */
		}
		//加载下拉框查询条件
		function initLoadComboData(){
			loadProjectCategory();
			loadSecialty();
			loadPc();
		}
		
		function initAlterMainFormData(){
			//设置项目选中
			var project_category = "${mainmodel?if_exists.project_category?if_exists}";
			if(project_category){
				setDefaultValueForCombobox("project_category_formid",project_category);
				//$("#project_category_formid option[value="+project_category+"]").attr("selected","selected");
			}
			//设置专业选中
			var specialty = "${mainmodel?if_exists.specialty?if_exists}";
			if(specialty){
				setDefaultValueForCombobox("specialty_formid",specialty);
				//$("#specialty_formid option[value="+specialty+"]").attr("selected","selected");
			}
			//设置是否拍照选中
			var inspstan_secretinquiries = "${mainmodel?if_exists.inspstan_secretinquiries?if_exists}";
			if(inspstan_secretinquiries=="1"){
				$("#inspstan_secretinquiries_formid").attr("checked","checked");
			}
			else{
				$("#inspstan_secretinquiries_formid").removeAttr("checked");
			}
			//设置对口主管频次选中
			var inspstan_dkzg_pc = "${mainmodel?if_exists.inspstan_dkzg_pc?if_exists}";
			if(inspstan_dkzg_pc){
				setDefaultValueForCombobox("inspstan_dkzg_pc_formid",inspstan_dkzg_pc);
				//$("#inspstan_dkzg_pc_formid option[value="+inspstan_dkzg_pc+"]").attr("selected","selected");
			}
			//设置部门经理频次选中
			var inspstan_bmjl_pc = "${mainmodel?if_exists.inspstan_bmjl_pc?if_exists}";
			if(inspstan_bmjl_pc){
				setDefaultValueForCombobox("inspstan_bmjl_pc_formid",inspstan_bmjl_pc);
				//$("#inspstan_bmjl_pc_formid option[value="+inspstan_bmjl_pc+"]").attr("selected","selected");
			}
			//设置项目经理频次选中
			var inspstan_xmjl_pc = "${mainmodel?if_exists.inspstan_xmjl_pc?if_exists}";
			if(inspstan_xmjl_pc){
				setDefaultValueForCombobox("inspstan_xmjl_pc_formid",inspstan_xmjl_pc);
				//$("#inspstan_xmjl_pc_formid option[value="+inspstan_xmjl_pc+"]").attr("selected","selected");
			}
			//设置区域总助频次选中
			var inspstan_qyzz_pc = "${mainmodel?if_exists.inspstan_qyzz_pc?if_exists}";
			if(inspstan_qyzz_pc){
				setDefaultValueForCombobox("inspstan_qyzz_pc_formid",inspstan_qyzz_pc);
				//$("#inspstan_qyzz_pc_formid option[value="+inspstan_qyzz_pc+"]").attr("selected","selected");
			}
			//设置区域总频次选中
			var inspstan_qyz_pc = "${mainmodel?if_exists.inspstan_qyz_pc?if_exists}";
			if(inspstan_qyz_pc){
				setDefaultValueForCombobox("inspstan_qyz_pc_formid",inspstan_qyz_pc);
				//$("#inspstan_qyz_pc_formid option[value="+inspstan_qyz_pc+"]").attr("selected","selected");
			}
			//设置总监频次选中
			var inspstan_zj_pc = "${mainmodel?if_exists.inspstan_zj_pc?if_exists}";
			if(inspstan_zj_pc){
				setDefaultValueForCombobox("inspstan_zj_pc_formid",inspstan_zj_pc);
				//$("#inspstan_zj_pc_formid option[value="+inspstan_zj_pc+"]").attr("selected","selected");
			}
		}
		
		//设置下拉框默认值
		function setDefaultValueForCombobox(combId,selectVal){
			//$("#"+combId).combobox("select",selectVal);
			var data = $("#"+combId).combobox("getData");
			for(var i=0; i<data.length; i++){
				var obj = data[i];
				if(obj.dict_code == selectVal){
					obj.selected = true;
					return;
				}
			}
		}
		
		$(function(){
			initLoadComboData();
			if("${mainmodel?if_exists.pk_inspstan?if_exists}"){
				initAlterMainFormData();
			}
			$("#save_mainbtn").click(function(){
				if(!$("#yjwy_main_form").form('enableValidation').form('validate')){
					return;
				}
				var project_category = $("#project_category_formid").combobox("getValue");
				if(!project_category){
					$.messager.alert("提示","请选择项目分类");
					return;
				}
				var specialty = $("#specialty_formid").combobox("getValue");	
				if(!specialty){
					$.messager.alert("提示","请选择专业");
					return;
				}
				var saveUrl = "${basePath?if_exists}ezfm/quality/proinspect/inspect/standard/save";
				var updateUrl = "${basePath?if_exists}ezfm/quality/proinspect/inspect/standard/update";
				
				if($("#inspstan_secretinquiries_formid").is(':checked')){
					$("#inspstan_secretinquiries_formid").val(1);
				}else{
					$("#inspstan_secretinquiries_formid").val(0);
				}
				var formdata =  $("#yjwy_main_form").serializeObject();
				if(formdata.pk_inspstan){
					saveMainForm(updateUrl,formdata);
				}else{
					saveMainForm(saveUrl,formdata);
				}
			});
			$("#reset_mainbtn").click(function(){
// 				$('#yjwy_main_form').form('clear');
				$("#project_category_formid").combobox("setText","请选择");  //标准编码
				$("#specialty_formid").combobox("setText","请选择");         //项目类别
				$("#inspstan_scorevalue").textbox("setText","");           //分值
				
				$("#inspstan_category").textbox("setText","");  //标准类别
				$("#inspstan_category_description").textbox("setText","");         //标准类别描述
				$("#inspstan_performance_norm").textbox("setText","");      //质量绩效指标
				
				$("#inspstan_usingscope").textbox("setText","");  //使用范围
				$("#inspstan_inpectmethod").textbox("setText","");         //核查方法
				$("#inspstan_dkzg_pc_formid").textbox("setText","请选择");      //对口主管频次
				
				$("#inspstan_bmjl_pc_formid").textbox("setText","请选择"); //部门经理频次
				$("#inspstan_xmjl_pc_formid").textbox("setText","请选择"); //项目经理频次
				$("#inspstan_qyzz_pc_formid").textbox("setText","请选择");  //区域总助频次
				$("#inspstan_qyz_pc_formid").textbox("setText","请选择");  //区域总频次
				$("#inspstan_zj_pc_formid").textbox("setText","请选择");  //总监频次
				
			});
		});
	</script>
	<script type="text/javascript" src="resources/ezfm/js/pub/textarea-left-count.js"></script>
</body>